import{S as F,i as Y,s as Z,w as P,x as q,y as I,q as O,o as Q,B as L,Q as ee,v as te,R as ne,e as k,k as T,l as B,c as S,a as E,d as _,m as y,b as le,g as m,n as re,p as se,D as oe,T as ae,t as b,h as g,J as R,P as j,K as N,O as H,j as D,N as ce}from"../chunks/vendor-d6b7611b.js";import{H as V}from"../chunks/Headline-d4e83fb2.js";import{P as ie}from"../chunks/PageWithNavigation-21aa657f.js";function M(f,e,n){const t=f.slice();return t[12]=e[n][0],t[13]=e[n][1],t}function fe(f){let e,n,t,s;return{c(){e=k("button"),n=b("Start scanning!")},l(o){e=S(o,"BUTTON",{});var l=E(e);n=g(l,"Start scanning!"),l.forEach(_)},m(o,l){m(o,e,l),R(e,n),t||(s=j(e,"click",f[5]),t=!0)},p:N,i:N,o:N,d(o){o&&_(e),t=!1,s()}}}function ue(f){let e,n,t,s,o,l;return e=new V({props:{$$slots:{default:[me]},$$scope:{ctx:f}}}),{c(){P(e.$$.fragment),n=T(),t=k("textarea")},l(r){q(e.$$.fragment,r),n=y(r),t=S(r,"TEXTAREA",{}),E(t).forEach(_)},m(r,a){I(e,r,a),m(r,n,a),m(r,t,a),H(t,f[2]),s=!0,o||(l=j(t,"input",f[7]),o=!0)},p(r,a){const h={};a&65536&&(h.$$scope={dirty:a,ctx:r}),e.$set(h),a&4&&H(t,r[2])},i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){Q(e.$$.fragment,r),s=!1},d(r){L(e,r),r&&_(n),r&&_(t),o=!1,l()}}}function _e(f){let e,n,t,s,o,l,r,a,h,i=Object.entries(f[3]),u=[];for(let c=0;c<i.length;c+=1)u[c]=G(M(f,i,c));return{c(){e=k("div"),n=b("Scanned QR data:"),t=T(),s=k("ul");for(let c=0;c<u.length;c+=1)u[c].c();o=T(),l=k("button"),r=b("Stop scanning!")},l(c){e=S(c,"DIV",{});var d=E(e);n=g(d,"Scanned QR data:"),d.forEach(_),t=y(c),s=S(c,"UL",{});var p=E(s);for(let w=0;w<u.length;w+=1)u[w].l(p);p.forEach(_),o=y(c),l=S(c,"BUTTON",{});var $=E(l);r=g($,"Stop scanning!"),$.forEach(_)},m(c,d){m(c,e,d),R(e,n),m(c,t,d),m(c,s,d);for(let p=0;p<u.length;p+=1)u[p].m(s,null);m(c,o,d),m(c,l,d),R(l,r),a||(h=j(l,"click",f[6]),a=!0)},p(c,d){if(d&8){i=Object.entries(c[3]);let p;for(p=0;p<i.length;p+=1){const $=M(c,i,p);u[p]?u[p].p($,d):(u[p]=G($),u[p].c(),u[p].m(s,null))}for(;p<u.length;p+=1)u[p].d(1);u.length=i.length}},i:N,o:N,d(c){c&&_(e),c&&_(t),c&&_(s),ce(u,c),c&&_(o),c&&_(l),a=!1,h()}}}function pe(f){let e,n,t,s,o;return e=new V({props:{$$slots:{default:[de]},$$scope:{ctx:f}}}),{c(){P(e.$$.fragment),n=T(),t=k("p"),s=b(f[1])},l(l){q(e.$$.fragment,l),n=y(l),t=S(l,"P",{});var r=E(t);s=g(r,f[1]),r.forEach(_)},m(l,r){I(e,l,r),m(l,n,r),m(l,t,r),R(t,s),o=!0},p(l,r){const a={};r&65536&&(a.$$scope={dirty:r,ctx:l}),e.$set(a),(!o||r&2)&&D(s,l[1])},i(l){o||(O(e.$$.fragment,l),o=!0)},o(l){Q(e.$$.fragment,l),o=!1},d(l){L(e,l),l&&_(n),l&&_(t)}}}function me(f){let e;return{c(){e=b("Successfully scanned all QR codes!")},l(n){e=g(n,"Successfully scanned all QR codes!")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function G(f){let e,n=f[12]+"",t,s,o=f[13]+"",l;return{c(){e=k("li"),t=b(n),s=b(": "),l=b(o)},l(r){e=S(r,"LI",{});var a=E(e);t=g(a,n),s=g(a,": "),l=g(a,o),a.forEach(_)},m(r,a){m(r,e,a),R(e,t),R(e,s),R(e,l)},p(r,a){a&8&&n!==(n=r[12]+"")&&D(t,n),a&8&&o!==(o=r[13]+"")&&D(l,o)},d(r){r&&_(e)}}}function de(f){let e;return{c(){e=b("Error scanning!")},l(n){e=g(n,"Error scanning!")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function he(f){let e,n,t,s,o,l;const r=[pe,_e,ue,fe],a=[];function h(i,u){return i[0]==="ERROR"?0:i[0]==="SCANNING"?1:i[0]==="RESULT"?2:3}return t=h(f),s=a[t]=r[t](f),{c(){e=k("div"),n=T(),s.c(),o=B(),this.h()},l(i){e=S(i,"DIV",{id:!0}),E(e).forEach(_),n=y(i),s.l(i),o=B(),this.h()},h(){le(e,"id","reader")},m(i,u){m(i,e,u),m(i,n,u),a[t].m(i,u),m(i,o,u),l=!0},p(i,u){let c=t;t=h(i),t===c?a[t].p(i,u):(re(),Q(a[c],1,1,()=>{a[c]=null}),se(),s=a[t],s?s.p(i,u):(s=a[t]=r[t](i),s.c()),O(s,1),s.m(o.parentNode,o))},i(i){l||(O(s),l=!0)},o(i){Q(s),l=!1},d(i){i&&_(e),i&&_(n),a[t].d(i),i&&_(o)}}}function $e(f){let e,n;return e=new ie({props:{$$slots:{default:[he]},$$scope:{ctx:f}}}),{c(){P(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,s){I(e,t,s),n=!0},p(t,[s]){const o={};s&65551&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||(O(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function be(f,e,n){let t,s="STOPPED",o=null,l="",r=oe({});ee(f,r,$=>n(3,t=$));let a,h=0,i=1;te(()=>{a=new ne("reader")});async function u($){const w=async(v,ge)=>{const U=v.substring(0,8),W=v.substring(9);ae(r,t[U]=W,t);const X=U.slice(-2);if(i=parseInt(X,10)+1,h=Object.keys(t).length,h===i){await d(),n(0,s="RESULT");const x=Object.entries(t);x.sort(([C],[A])=>C<A?-1:1),n(2,l=x.reduce((C,[A,z])=>C+z,""))}},J=v=>{console.error(v)},K={fps:500,qrbox:{width:250,height:250}};try{await a.start({facingMode:"environment"},K,w,J),n(0,s="SCANNING")}catch(v){console.error(v),n(1,o=v.message)}}async function c(){await d(),n(0,s="STOPPED")}async function d(){try{await a.stop()}catch($){console.error($),n(1,o=$.message)}}function p(){l=this.value,n(2,l)}return[s,o,l,t,r,u,c,p]}class Re extends F{constructor(e){super();Y(this,e,be,$e,Z,{})}}export{Re as default};
