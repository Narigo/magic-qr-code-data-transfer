import{S as z,i as F,s as Y,w as C,x as I,y as L,q as O,o as Q,B as q,Q as Z,v as ee,R as te,e as S,k as T,l as B,c as k,a as v,d as _,m as y,b as ne,g as m,n as le,p as se,D as re,T as oe,t as b,h as g,J as E,O as j,K as N,N as H,j as P,P as ae}from"../chunks/vendor-a0cacfa4.js";import{H as V}from"../chunks/Headline-080cdd27.js";import{P as ce}from"../chunks/PageWithNavigation-5566e3d8.js";function M(f,e,n){const t=f.slice();return t[12]=e[n][0],t[13]=e[n][1],t}function ie(f){let e,n,t,r;return{c(){e=S("button"),n=b("Start scanning!")},l(o){e=k(o,"BUTTON",{});var l=v(e);n=g(l,"Start scanning!"),l.forEach(_)},m(o,l){m(o,e,l),E(e,n),t||(r=j(e,"click",f[5]),t=!0)},p:N,i:N,o:N,d(o){o&&_(e),t=!1,r()}}}function fe(f){let e,n,t,r,o,l;return e=new V({props:{$$slots:{default:[pe]},$$scope:{ctx:f}}}),{c(){C(e.$$.fragment),n=T(),t=S("textarea")},l(s){I(e.$$.fragment,s),n=y(s),t=k(s,"TEXTAREA",{}),v(t).forEach(_)},m(s,a){L(e,s,a),m(s,n,a),m(s,t,a),H(t,f[2]),r=!0,o||(l=j(t,"input",f[7]),o=!0)},p(s,a){const h={};a&65536&&(h.$$scope={dirty:a,ctx:s}),e.$set(h),a&4&&H(t,s[2])},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){Q(e.$$.fragment,s),r=!1},d(s){q(e,s),s&&_(n),s&&_(t),o=!1,l()}}}function ue(f){let e,n,t,r,o,l,s,a,h,i=Object.entries(f[3]),u=[];for(let c=0;c<i.length;c+=1)u[c]=G(M(f,i,c));return{c(){e=S("div"),n=b("Scanned QR data:"),t=T(),r=S("ul");for(let c=0;c<u.length;c+=1)u[c].c();o=T(),l=S("button"),s=b("Stop scanning!")},l(c){e=k(c,"DIV",{});var d=v(e);n=g(d,"Scanned QR data:"),d.forEach(_),t=y(c),r=k(c,"UL",{});var p=v(r);for(let R=0;R<u.length;R+=1)u[R].l(p);p.forEach(_),o=y(c),l=k(c,"BUTTON",{});var $=v(l);s=g($,"Stop scanning!"),$.forEach(_)},m(c,d){m(c,e,d),E(e,n),m(c,t,d),m(c,r,d);for(let p=0;p<u.length;p+=1)u[p].m(r,null);m(c,o,d),m(c,l,d),E(l,s),a||(h=j(l,"click",f[6]),a=!0)},p(c,d){if(d&8){i=Object.entries(c[3]);let p;for(p=0;p<i.length;p+=1){const $=M(c,i,p);u[p]?u[p].p($,d):(u[p]=G($),u[p].c(),u[p].m(r,null))}for(;p<u.length;p+=1)u[p].d(1);u.length=i.length}},i:N,o:N,d(c){c&&_(e),c&&_(t),c&&_(r),ae(u,c),c&&_(o),c&&_(l),a=!1,h()}}}function _e(f){let e,n,t,r,o;return e=new V({props:{$$slots:{default:[me]},$$scope:{ctx:f}}}),{c(){C(e.$$.fragment),n=T(),t=S("p"),r=b(f[1])},l(l){I(e.$$.fragment,l),n=y(l),t=k(l,"P",{});var s=v(t);r=g(s,f[1]),s.forEach(_)},m(l,s){L(e,l,s),m(l,n,s),m(l,t,s),E(t,r),o=!0},p(l,s){const a={};s&65536&&(a.$$scope={dirty:s,ctx:l}),e.$set(a),(!o||s&2)&&P(r,l[1])},i(l){o||(O(e.$$.fragment,l),o=!0)},o(l){Q(e.$$.fragment,l),o=!1},d(l){q(e,l),l&&_(n),l&&_(t)}}}function pe(f){let e;return{c(){e=b("Successfully scanned all QR codes!")},l(n){e=g(n,"Successfully scanned all QR codes!")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function G(f){let e,n=f[12]+"",t,r,o=f[13]+"",l;return{c(){e=S("li"),t=b(n),r=b(": "),l=b(o)},l(s){e=k(s,"LI",{});var a=v(e);t=g(a,n),r=g(a,": "),l=g(a,o),a.forEach(_)},m(s,a){m(s,e,a),E(e,t),E(e,r),E(e,l)},p(s,a){a&8&&n!==(n=s[12]+"")&&P(t,n),a&8&&o!==(o=s[13]+"")&&P(l,o)},d(s){s&&_(e)}}}function me(f){let e;return{c(){e=b("Error scanning!")},l(n){e=g(n,"Error scanning!")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function de(f){let e,n,t,r,o,l;const s=[_e,ue,fe,ie],a=[];function h(i,u){return i[0]==="ERROR"?0:i[0]==="SCANNING"?1:i[0]==="RESULT"?2:3}return t=h(f),r=a[t]=s[t](f),{c(){e=S("div"),n=T(),r.c(),o=B(),this.h()},l(i){e=k(i,"DIV",{id:!0}),v(e).forEach(_),n=y(i),r.l(i),o=B(),this.h()},h(){ne(e,"id","reader")},m(i,u){m(i,e,u),m(i,n,u),a[t].m(i,u),m(i,o,u),l=!0},p(i,u){let c=t;t=h(i),t===c?a[t].p(i,u):(le(),Q(a[c],1,1,()=>{a[c]=null}),se(),r=a[t],r?r.p(i,u):(r=a[t]=s[t](i),r.c()),O(r,1),r.m(o.parentNode,o))},i(i){l||(O(r),l=!0)},o(i){Q(r),l=!1},d(i){i&&_(e),i&&_(n),a[t].d(i),i&&_(o)}}}function he(f){let e,n;return e=new ce({props:{$$slots:{default:[de]},$$scope:{ctx:f}}}),{c(){C(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,r){L(e,t,r),n=!0},p(t,[r]){const o={};r&65551&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(O(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function $e(f,e,n){let t,r="STOPPED",o=null,l="",s=re({});Z(f,s,$=>n(3,t=$));let a,h=0,i=1;ee(()=>{a=new te("reader")});async function u($){const R=async(w,be)=>{const U=w.substring(0,8),K=w.substring(9);oe(s,t[U]=K,t);const W=U.slice(-2);if(i=parseInt(W,10)+1,h=Object.keys(t).length,h===i){await d(),n(0,r="RESULT");const x=Object.entries(t);x.sort(([D],[A])=>D<A?-1:1),n(2,l=x.reduce((D,[A,X])=>D+X,""))}},J={fps:500,qrbox:{width:250,height:250}};try{await a.start({facingMode:"environment"},J,R),n(0,r="SCANNING")}catch(w){console.error(w),n(1,o=w.message)}}async function c(){await d(),n(0,r="STOPPED")}async function d(){try{await a.stop()}catch($){console.error($),n(1,o=$.message)}}function p(){l=this.value,n(2,l)}return[r,o,l,t,s,u,c,p]}class Ee extends z{constructor(e){super();F(this,e,$e,he,Y,{})}}export{Ee as default};
