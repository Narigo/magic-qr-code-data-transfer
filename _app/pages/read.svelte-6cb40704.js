import{S as ie,i as fe,s as ue,w as A,x as B,y as V,q as T,o as N,B as M,Q as _e,v as pe,R as me,e as S,k as C,l as ee,c as w,a as R,d as u,m as I,b as L,g as b,n as z,p as F,D as de,T as X,t as Q,h as q,J as y,M as G,K as H,U as he,L as te,V as le,j as J,N as $e}from"../chunks/vendor-b69de5ca.js";import{H as oe}from"../chunks/Headline-b2f62a05.js";import{P as be}from"../chunks/PageWithNavigation-f8246026.js";import{Q as ae}from"../chunks/Qrcode-ea6a9988.js";function re(i,t,l){const e=i.slice();return e[14]=t[l],e}function ge(i){let t,l,e,r,o,a,n;return{c(){t=S("button"),l=Q("Start scanning!"),e=C(),r=S("button"),o=Q("Reset scanning")},l(c){t=w(c,"BUTTON",{});var m=R(t);l=q(m,"Start scanning!"),m.forEach(u),e=I(c),r=w(c,"BUTTON",{});var f=R(r);o=q(f,"Reset scanning"),f.forEach(u)},m(c,m){b(c,t,m),y(t,l),b(c,e,m),b(c,r,m),y(r,o),a||(n=[G(t,"click",i[7]),G(r,"click",i[9])],a=!0)},p:H,i:H,o:H,d(c){c&&u(t),c&&u(e),c&&u(r),a=!1,he(n)}}}function ve(i){let t,l,e,r,o,a;return t=new oe({props:{$$slots:{default:[Ee]},$$scope:{ctx:i}}}),{c(){A(t.$$.fragment),l=C(),e=S("textarea")},l(n){B(t.$$.fragment,n),l=I(n),e=w(n,"TEXTAREA",{}),R(e).forEach(u)},m(n,c){V(t,n,c),b(n,l,c),b(n,e,c),te(e,i[2]),r=!0,o||(a=G(e,"input",i[11]),o=!0)},p(n,c){const m={};c&131072&&(m.$$scope={dirty:c,ctx:n}),t.$set(m),c&4&&te(e,n[2])},i(n){r||(T(t.$$.fragment,n),r=!0)},o(n){N(t.$$.fragment,n),r=!1},d(n){M(t,n),n&&u(l),n&&u(e),o=!1,a()}}}function ke(i){let t,l,e,r,o,a,n,c,m,f,_,k,p,g,v,P,D,E=new Array(i[4]).fill(1).map(i[10]),h=[];for(let s=0;s<E.length;s+=1)h[s]=se(re(i,E,s));const K=s=>N(h[s],1,1,()=>{h[s]=null});return{c(){t=S("div"),l=S("div"),r=C(),o=S("div"),a=Q(i[3]),n=Q(" of "),c=Q(i[4]),m=Q(" QR codes scanned."),f=C(),_=S("ul");for(let s=0;s<h.length;s+=1)h[s].c();k=C(),p=S("button"),g=Q("Stop scanning!"),this.h()},l(s){t=w(s,"DIV",{class:!0});var $=R(t);l=w($,"DIV",{class:!0,style:!0}),R(l).forEach(u),$.forEach(u),r=I(s),o=w(s,"DIV",{class:!0});var d=R(o);a=q(d,i[3]),n=q(d," of "),c=q(d,i[4]),m=q(d," QR codes scanned."),d.forEach(u),f=I(s),_=w(s,"UL",{class:!0});var O=R(_);for(let U=0;U<h.length;U+=1)h[U].l(O);O.forEach(u),k=I(s),p=w(s,"BUTTON",{});var j=R(p);g=q(j,"Stop scanning!"),j.forEach(u),this.h()},h(){L(l,"class","progress svelte-1ry2dsm"),L(l,"style",e=`width: ${100*i[3]/i[4]}%;`),L(t,"class","progressBar svelte-1ry2dsm"),L(o,"class","progressText svelte-1ry2dsm"),L(_,"class","qrcodes svelte-1ry2dsm")},m(s,$){b(s,t,$),y(t,l),b(s,r,$),b(s,o,$),y(o,a),y(o,n),y(o,c),y(o,m),b(s,f,$),b(s,_,$);for(let d=0;d<h.length;d+=1)h[d].m(_,null);b(s,k,$),b(s,p,$),y(p,g),v=!0,P||(D=G(p,"click",i[8]),P=!0)},p(s,$){if((!v||$&24&&e!==(e=`width: ${100*s[3]/s[4]}%;`))&&L(l,"style",e),(!v||$&8)&&J(a,s[3]),(!v||$&16)&&J(c,s[4]),$&48){E=new Array(s[4]).fill(1).map(s[10]);let d;for(d=0;d<E.length;d+=1){const O=re(s,E,d);h[d]?(h[d].p(O,$),T(h[d],1)):(h[d]=se(O),h[d].c(),T(h[d],1),h[d].m(_,null))}for(z(),d=E.length;d<h.length;d+=1)K(d);F()}},i(s){if(!v){for(let $=0;$<E.length;$+=1)T(h[$]);v=!0}},o(s){h=h.filter(Boolean);for(let $=0;$<h.length;$+=1)N(h[$]);v=!1},d(s){s&&u(t),s&&u(r),s&&u(o),s&&u(f),s&&u(_),$e(h,s),s&&u(k),s&&u(p),P=!1,D()}}}function ye(i){let t,l,e,r,o;return t=new oe({props:{$$slots:{default:[Re]},$$scope:{ctx:i}}}),{c(){A(t.$$.fragment),l=C(),e=S("p"),r=Q(i[1])},l(a){B(t.$$.fragment,a),l=I(a),e=w(a,"P",{});var n=R(e);r=q(n,i[1]),n.forEach(u)},m(a,n){V(t,a,n),b(a,l,n),b(a,e,n),y(e,r),o=!0},p(a,n){const c={};n&131072&&(c.$$scope={dirty:n,ctx:a}),t.$set(c),(!o||n&2)&&J(r,a[1])},i(a){o||(T(t.$$.fragment,a),o=!0)},o(a){N(t.$$.fragment,a),o=!1},d(a){M(t,a),a&&u(l),a&&u(e)}}}function Ee(i){let t;return{c(){t=Q("Successfully scanned all QR codes!")},l(l){t=q(l,"Successfully scanned all QR codes!")},m(l,e){b(l,t,e)},d(l){l&&u(t)}}}function Se(i){let t,l;return t=new ae({props:{value:"..."}}),{c(){A(t.$$.fragment)},l(e){B(t.$$.fragment,e)},m(e,r){V(t,e,r),l=!0},p:H,i(e){l||(T(t.$$.fragment,e),l=!0)},o(e){N(t.$$.fragment,e),l=!1},d(e){M(t,e)}}}function we(i){let t,l;return t=new ae({props:{value:i[14].chunk}}),{c(){A(t.$$.fragment)},l(e){B(t.$$.fragment,e)},m(e,r){V(t,e,r),l=!0},p(e,r){const o={};r&48&&(o.value=e[14].chunk),t.$set(o)},i(e){l||(T(t.$$.fragment,e),l=!0)},o(e){N(t.$$.fragment,e),l=!1},d(e){M(t,e)}}}function se(i){let t,l,e,r,o,a=i[14].index+1+"",n,c,m;const f=[we,Se],_=[];function k(p,g){return p[14].chunk?0:1}return l=k(i),e=_[l]=f[l](i),{c(){t=S("li"),e.c(),r=C(),o=S("div"),n=Q(a),c=C(),this.h()},l(p){t=w(p,"LI",{class:!0});var g=R(t);e.l(g),r=I(g),o=w(g,"DIV",{});var v=R(o);n=q(v,a),v.forEach(u),c=I(g),g.forEach(u),this.h()},h(){L(t,"class","qrcode svelte-1ry2dsm"),le(t,"scanned",!!i[14].chunk)},m(p,g){b(p,t,g),_[l].m(t,null),y(t,r),y(t,o),y(o,n),y(t,c),m=!0},p(p,g){let v=l;l=k(p),l===v?_[l].p(p,g):(z(),N(_[v],1,1,()=>{_[v]=null}),F(),e=_[l],e?e.p(p,g):(e=_[l]=f[l](p),e.c()),T(e,1),e.m(t,r)),(!m||g&48)&&a!==(a=p[14].index+1+"")&&J(n,a),g&48&&le(t,"scanned",!!p[14].chunk)},i(p){m||(T(e),m=!0)},o(p){N(e),m=!1},d(p){p&&u(t),_[l].d()}}}function Re(i){let t;return{c(){t=Q("Error scanning!")},l(l){t=q(l,"Error scanning!")},m(l,e){b(l,t,e)},d(l){l&&u(t)}}}function Te(i){let t,l,e,r,o,a;const n=[ye,ke,ve,ge],c=[];function m(f,_){return f[0]==="ERROR"?0:f[0]==="SCANNING"?1:f[0]==="RESULT"?2:3}return e=m(i),r=c[e]=n[e](i),{c(){t=S("div"),l=C(),r.c(),o=ee(),this.h()},l(f){t=w(f,"DIV",{id:!0}),R(t).forEach(u),l=I(f),r.l(f),o=ee(),this.h()},h(){L(t,"id","reader")},m(f,_){b(f,t,_),b(f,l,_),c[e].m(f,_),b(f,o,_),a=!0},p(f,_){let k=e;e=m(f),e===k?c[e].p(f,_):(z(),N(c[k],1,1,()=>{c[k]=null}),F(),r=c[e],r?r.p(f,_):(r=c[e]=n[e](f),r.c()),T(r,1),r.m(o.parentNode,o))},i(f){a||(T(r),a=!0)},o(f){N(r),a=!1},d(f){f&&u(t),f&&u(l),c[e].d(f),f&&u(o)}}}function Qe(i){let t,l;return t=new be({props:{$$slots:{default:[Te]},$$scope:{ctx:i}}}),{c(){A(t.$$.fragment)},l(e){B(t.$$.fragment,e)},m(e,r){V(t,e,r),l=!0},p(e,[r]){const o={};r&131135&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){l||(T(t.$$.fragment,e),l=!0)},o(e){N(t.$$.fragment,e),l=!1},d(e){M(t,e)}}}function ne(i){return`${i}`.padStart(2,"0")}function qe(i,t,l){let e,r="STOPPED",o=null,a="",n=de({});_e(i,n,D=>l(5,e=D));let c,m=0,f=1;pe(()=>{c=new me("reader")});async function _(D){const E=async(s,$)=>{const O=s.substring(0,8),j=s.substring(9),U=O.slice(-2),Y=parseInt(U,10)+1;if(f!==Y&&(X(n,e={},e),l(4,f=Y)),X(n,e[O]=j,e),l(3,m=Object.keys(e).length),m===f){await p(),l(0,r="RESULT");const Z=Object.entries(e);Z.sort(([W],[x])=>W<x?-1:1),l(2,a=Z.reduce((W,[x,ce])=>W+ce,""))}},h=s=>{console.error(s)},K={fps:500,qrbox:{width:250,height:250}};try{await c.start({facingMode:"environment"},K,E,h),l(0,r="SCANNING")}catch(s){console.error(s),l(1,o=s.message)}}async function k(){await p(),l(0,r="STOPPED")}async function p(){try{await c.stop()}catch(D){console.error(D),l(1,o=D.message)}}async function g(){X(n,e={},e)}const v=(D,E)=>({index:E,chunk:e[`MQR${ne(E)}.${ne(f-1)}`]});function P(){a=this.value,l(2,a)}return[r,o,a,m,f,e,n,_,k,g,v,P]}class Oe extends ie{constructor(t){super();fe(this,t,qe,Qe,ue,{})}}export{Oe as default};
