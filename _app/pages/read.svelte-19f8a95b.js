import{S as F,i as J,s as K,F as le,e as q,c as V,a as L,d as p,b as D,g,T as _e,G as re,H as ae,I as oe,q as h,o as b,U as $e,w as E,x as I,y as R,B as C,V as pe,v as me,W as de,k as O,l as Z,m as y,n as U,p as j,D as ge,X as W,t as w,h as S,J as T,j as M,Q as x,O as he,L as be,M as ve,N as ke,K as we}from"../chunks/vendor-cee00e4c.js";import{H as fe}from"../chunks/Headline-14ed1409.js";import{P as Se}from"../chunks/PageWithNavigation-9519c8ea.js";import{T as Ee,Q as ce}from"../chunks/Textarea-79d98a22.js";function Ie(a){let e,s,t,l;const n=a[3].default,r=le(n,a,a[2],null);return{c(){e=q("button"),r&&r.c(),this.h()},l(f){e=V(f,"BUTTON",{class:!0});var u=L(e);r&&r.l(u),u.forEach(p),this.h()},h(){e.disabled=a[0],D(e,"class","svelte-1grfu1j")},m(f,u){g(f,e,u),r&&r.m(e,null),s=!0,t||(l=_e(e,"click",a[1]),t=!0)},p(f,[u]){r&&r.p&&(!s||u&4)&&re(r,n,f,f[2],s?oe(n,f[2],u,null):ae(f[2]),null),(!s||u&1)&&(e.disabled=f[0])},i(f){s||(h(r,f),s=!0)},o(f){b(r,f),s=!1},d(f){f&&p(e),r&&r.d(f),t=!1,l()}}}function Re(a,e,s){let{$$slots:t={},$$scope:l}=e,{disabled:n=!1}=e;const r=$e();function f(){r("click")}return a.$$set=u=>{"disabled"in u&&s(0,n=u.disabled),"$$scope"in u&&s(2,l=u.$$scope)},[n,f,l,t]}class H extends F{constructor(e){super();J(this,e,Re,Ie,K,{disabled:0})}}function Ce(a){let e,s;const t=a[1].default,l=le(t,a,a[0],null);return{c(){e=q("div"),l&&l.c(),this.h()},l(n){e=V(n,"DIV",{class:!0});var r=L(e);l&&l.l(r),r.forEach(p),this.h()},h(){D(e,"class","svelte-gubaqs")},m(n,r){g(n,e,r),l&&l.m(e,null),s=!0},p(n,[r]){l&&l.p&&(!s||r&1)&&re(l,t,n,n[0],s?oe(t,n[0],r,null):ae(n[0]),null)},i(n){s||(h(l,n),s=!0)},o(n){b(l,n),s=!1},d(n){n&&p(e),l&&l.d(n)}}}function De(a,e,s){let{$$slots:t={},$$scope:l}=e;return a.$$set=n=>{"$$scope"in n&&s(0,l=n.$$scope)},[l,t]}class Ne extends F{constructor(e){super();J(this,e,De,Ce,K,{})}}function ee(a,e,s){const t=a.slice();return t[15]=e[s],t}function Qe(a){let e,s;return e=new H({props:{$$slots:{default:[Oe]},$$scope:{ctx:a}}}),e.$on("click",a[8]),{c(){E(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,l){R(e,t,l),s=!0},p(t,l){const n={};l&262144&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){s||(h(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){C(e,t)}}}function Te(a){let e,s,t,l;return e=new H({props:{$$slots:{default:[ye]},$$scope:{ctx:a}}}),e.$on("click",a[8]),t=new H({props:{$$slots:{default:[Pe]},$$scope:{ctx:a}}}),t.$on("click",a[10]),{c(){E(e.$$.fragment),s=O(),E(t.$$.fragment)},l(n){I(e.$$.fragment,n),s=y(n),I(t.$$.fragment,n)},m(n,r){R(e,n,r),g(n,s,r),R(t,n,r),l=!0},p(n,r){const f={};r&262144&&(f.$$scope={dirty:r,ctx:n}),e.$set(f);const u={};r&262144&&(u.$$scope={dirty:r,ctx:n}),t.$set(u)},i(n){l||(h(e.$$.fragment,n),h(t.$$.fragment,n),l=!0)},o(n){b(e.$$.fragment,n),b(t.$$.fragment,n),l=!1},d(n){C(e,n),n&&p(s),C(t,n)}}}function qe(a){let e,s;return e=new Ne({props:{$$slots:{default:[Me]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,l){R(e,t,l),s=!0},p(t,l){const n={};l&262148&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){s||(h(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){C(e,t)}}}function Ve(a){let e,s,t,l=a[4]>0&&te(a);return s=new H({props:{$$slots:{default:[Ae]},$$scope:{ctx:a}}}),s.$on("click",a[9]),{c(){l&&l.c(),e=O(),E(s.$$.fragment)},l(n){l&&l.l(n),e=y(n),I(s.$$.fragment,n)},m(n,r){l&&l.m(n,r),g(n,e,r),R(s,n,r),t=!0},p(n,r){n[4]>0?l?(l.p(n,r),r&16&&h(l,1)):(l=te(n),l.c(),h(l,1),l.m(e.parentNode,e)):l&&(U(),b(l,1,1,()=>{l=null}),j());const f={};r&262144&&(f.$$scope={dirty:r,ctx:n}),s.$set(f)},i(n){t||(h(l),h(s.$$.fragment,n),t=!0)},o(n){b(l),b(s.$$.fragment,n),t=!1},d(n){l&&l.d(n),n&&p(e),C(s,n)}}}function Le(a){let e,s,t,l,n;return e=new fe({props:{$$slots:{default:[Ge]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment),s=O(),t=q("p"),l=w(a[1])},l(r){I(e.$$.fragment,r),s=y(r),t=V(r,"P",{});var f=L(t);l=S(f,a[1]),f.forEach(p)},m(r,f){R(e,r,f),g(r,s,f),g(r,t,f),T(t,l),n=!0},p(r,f){const u={};f&262144&&(u.$$scope={dirty:f,ctx:r}),e.$set(u),(!n||f&2)&&M(l,r[1])},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){C(e,r),r&&p(s),r&&p(t)}}}function Oe(a){let e;return{c(){e=w("Start scanning!")},l(s){e=S(s,"Start scanning!")},m(s,t){g(s,e,t)},d(s){s&&p(e)}}}function ye(a){let e;return{c(){e=w("Continue scanning")},l(s){e=S(s,"Continue scanning")},m(s,t){g(s,e,t)},d(s){s&&p(e)}}}function Pe(a){let e;return{c(){e=w("Reset scanning")},l(s){e=S(s,"Reset scanning")},m(s,t){g(s,e,t)},d(s){s&&p(e)}}}function Be(a){let e;return{c(){e=w("Here is the restored data:")},l(s){e=S(s,"Here is the restored data:")},m(s,t){g(s,e,t)},d(s){s&&p(e)}}}function He(a){let e;return{c(){e=w("Reset scanning")},l(s){e=S(s,"Reset scanning")},m(s,t){g(s,e,t)},d(s){s&&p(e)}}}function Me(a){let e,s,t,l,n,r,f;e=new fe({props:{$$slots:{default:[Be]},$$scope:{ctx:a}}});function u(o){a[12](o)}let v={grow:!0};return a[2]!==void 0&&(v.value=a[2]),t=new Ee({props:v}),be.push(()=>ve(t,"value",u)),r=new H({props:{$$slots:{default:[He]},$$scope:{ctx:a}}}),r.$on("click",a[10]),{c(){E(e.$$.fragment),s=O(),E(t.$$.fragment),n=O(),E(r.$$.fragment)},l(o){I(e.$$.fragment,o),s=y(o),I(t.$$.fragment,o),n=y(o),I(r.$$.fragment,o)},m(o,_){R(e,o,_),g(o,s,_),R(t,o,_),g(o,n,_),R(r,o,_),f=!0},p(o,_){const k={};_&262144&&(k.$$scope={dirty:_,ctx:o}),e.$set(k);const m={};!l&&_&4&&(l=!0,m.value=o[2],ke(()=>l=!1)),t.$set(m);const c={};_&262144&&(c.$$scope={dirty:_,ctx:o}),r.$set(c)},i(o){f||(h(e.$$.fragment,o),h(t.$$.fragment,o),h(r.$$.fragment,o),f=!0)},o(o){b(e.$$.fragment,o),b(t.$$.fragment,o),b(r.$$.fragment,o),f=!1},d(o){C(e,o),o&&p(s),C(t,o),o&&p(n),C(r,o)}}}function te(a){let e,s,t,l,n,r,f,u,v,o,_,k,m=new Array(a[4]).fill(1).map(a[11]),c=[];for(let i=0;i<m.length;i+=1)c[i]=se(ee(a,m,i));const N=i=>b(c[i],1,1,()=>{c[i]=null});return{c(){e=q("div"),s=q("div"),l=O(),n=q("div"),r=w(a[3]),f=w(" of "),u=w(a[4]),v=w(" QR codes scanned."),o=O(),_=q("ul");for(let i=0;i<c.length;i+=1)c[i].c();this.h()},l(i){e=V(i,"DIV",{class:!0});var d=L(e);s=V(d,"DIV",{class:!0,style:!0}),L(s).forEach(p),d.forEach(p),l=y(i),n=V(i,"DIV",{class:!0});var $=L(n);r=S($,a[3]),f=S($," of "),u=S($,a[4]),v=S($," QR codes scanned."),$.forEach(p),o=y(i),_=V(i,"UL",{class:!0});var Q=L(_);for(let P=0;P<c.length;P+=1)c[P].l(Q);Q.forEach(p),this.h()},h(){D(s,"class","progress svelte-uxd3o6"),D(s,"style",t=`width: ${100*a[3]/a[4]}%;`),D(e,"class","progressBar svelte-uxd3o6"),D(n,"class","progressText svelte-uxd3o6"),D(_,"class","qrcodes svelte-uxd3o6")},m(i,d){g(i,e,d),T(e,s),g(i,l,d),g(i,n,d),T(n,r),T(n,f),T(n,u),T(n,v),g(i,o,d),g(i,_,d);for(let $=0;$<c.length;$+=1)c[$].m(_,null);k=!0},p(i,d){if((!k||d&24&&t!==(t=`width: ${100*i[3]/i[4]}%;`))&&D(s,"style",t),(!k||d&8)&&M(r,i[3]),(!k||d&16)&&M(u,i[4]),d&48){m=new Array(i[4]).fill(1).map(i[11]);let $;for($=0;$<m.length;$+=1){const Q=ee(i,m,$);c[$]?(c[$].p(Q,d),h(c[$],1)):(c[$]=se(Q),c[$].c(),h(c[$],1),c[$].m(_,null))}for(U(),$=m.length;$<c.length;$+=1)N($);j()}},i(i){if(!k){for(let d=0;d<m.length;d+=1)h(c[d]);k=!0}},o(i){c=c.filter(Boolean);for(let d=0;d<c.length;d+=1)b(c[d]);k=!1},d(i){i&&p(e),i&&p(l),i&&p(n),i&&p(o),i&&p(_),he(c,i)}}}function Ue(a){let e,s;return e=new ce({props:{value:"..."}}),{c(){E(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,l){R(e,t,l),s=!0},p:we,i(t){s||(h(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){C(e,t)}}}function je(a){let e,s;return e=new ce({props:{value:a[15].chunk}}),{c(){E(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,l){R(e,t,l),s=!0},p(t,l){const n={};l&48&&(n.value=t[15].chunk),e.$set(n)},i(t){s||(h(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){C(e,t)}}}function se(a){let e,s,t,l,n,r=a[15].index+1+"",f,u,v;const o=[je,Ue],_=[];function k(m,c){return m[15].chunk?0:1}return s=k(a),t=_[s]=o[s](a),{c(){e=q("li"),t.c(),l=O(),n=q("div"),f=w(r),u=O(),this.h()},l(m){e=V(m,"LI",{class:!0});var c=L(e);t.l(c),l=y(c),n=V(c,"DIV",{});var N=L(n);f=S(N,r),N.forEach(p),u=y(c),c.forEach(p),this.h()},h(){D(e,"class","qrcode svelte-uxd3o6"),x(e,"scanned",!!a[15].chunk)},m(m,c){g(m,e,c),_[s].m(e,null),T(e,l),T(e,n),T(n,f),T(e,u),v=!0},p(m,c){let N=s;s=k(m),s===N?_[s].p(m,c):(U(),b(_[N],1,1,()=>{_[N]=null}),j(),t=_[s],t?t.p(m,c):(t=_[s]=o[s](m),t.c()),h(t,1),t.m(e,l)),(!v||c&48)&&r!==(r=m[15].index+1+"")&&M(f,r),c&48&&x(e,"scanned",!!m[15].chunk)},i(m){v||(h(t),v=!0)},o(m){b(t),v=!1},d(m){m&&p(e),_[s].d()}}}function Ae(a){let e;return{c(){e=w("Stop scanning!")},l(s){e=S(s,"Stop scanning!")},m(s,t){g(s,e,t)},d(s){s&&p(e)}}}function Ge(a){let e;return{c(){e=w("Error scanning!")},l(s){e=S(s,"Error scanning!")},m(s,t){g(s,e,t)},d(s){s&&p(e)}}}function We(a){let e,s,t,l,n,r;const f=[Le,Ve,qe,Te,Qe],u=[];function v(o,_){return o[0]==="ERROR"?0:o[0]==="SCANNING"?1:o[0]==="RESULT"?2:o[0]==="STOPPED"?3:4}return t=v(a),l=u[t]=f[t](a),{c(){e=q("div"),s=O(),l.c(),n=Z(),this.h()},l(o){e=V(o,"DIV",{id:!0,class:!0}),L(e).forEach(p),s=y(o),l.l(o),n=Z(),this.h()},h(){D(e,"id",a[7]),D(e,"class","reader svelte-uxd3o6")},m(o,_){g(o,e,_),g(o,s,_),u[t].m(o,_),g(o,n,_),r=!0},p(o,_){let k=t;t=v(o),t===k?u[t].p(o,_):(U(),b(u[k],1,1,()=>{u[k]=null}),j(),l=u[t],l?l.p(o,_):(l=u[t]=f[t](o),l.c()),h(l,1),l.m(n.parentNode,n))},i(o){r||(h(l),r=!0)},o(o){b(l),r=!1},d(o){o&&p(e),o&&p(s),u[t].d(o),o&&p(n)}}}function Fe(a){let e,s;return e=new Se({props:{$$slots:{default:[We]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,l){R(e,t,l),s=!0},p(t,[l]){const n={};l&262207&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){s||(h(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){C(e,t)}}}let Je=0;function Ke(a){return`${a}${++Je}`}function ne(a){return`${a}`.padStart(2,"0")}function Xe(a,e,s){let t,l="INIT",n=null,r="",f=ge({});pe(a,f,$=>s(5,t=$));let u,v=0,o=0;const _=Ke("reader_");me(()=>{u=new de(_)});async function k(){const $=async B=>{const X=B.substring(0,8),ue=B.substring(9),ie=X.slice(-2),z=parseInt(ie,10)+1;if(o!==z&&(W(f,t={},t),s(4,o=z)),W(f,t[X]=ue,t),s(3,v=Object.keys(t).length),v===o){await c(),s(0,l="RESULT");const Y=Object.entries(t);Y.sort(([A],[G])=>A<G?-1:1),s(2,r=Y.reduce((A,[,G])=>A+G,""))}},Q=()=>{},P={fps:250};try{await u.start({facingMode:"environment"},P,$,Q),s(0,l="SCANNING")}catch(B){console.error(B),s(1,n=B.message)}}async function m(){await c(),s(0,l="STOPPED")}async function c(){try{await u.stop()}catch($){console.error($),s(1,n=$.message)}}async function N(){await c(),W(f,t={},t),s(2,r=""),s(3,v=0),s(4,o=0),await k()}const i=($,Q)=>({index:Q,chunk:t[`MQR${ne(Q)}.${ne(o-1)}`]});function d($){r=$,s(2,r)}return[l,n,r,v,o,t,f,_,k,m,N,i,d]}class tt extends F{constructor(e){super();J(this,e,Xe,Fe,K,{})}}export{tt as default};
