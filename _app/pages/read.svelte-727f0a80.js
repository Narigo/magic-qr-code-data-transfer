import{S as se,i as le,s as ne,F as ue,e as q,c as D,a as T,d as u,b as C,g,M as re,G as _e,H as pe,I as $e,q as v,o as w,Q as me,w as O,x as P,y as A,B,R as de,v as he,T as ge,k as I,l as z,m as N,n as G,p as F,D as be,U as j,L as Y,t as y,h as R,V as Z,J as Q,j as M,N as ke,K as ve}from"../chunks/vendor-b62c2773.js";import{H as oe}from"../chunks/Headline-4376ad16.js";import{P as we}from"../chunks/PageWithNavigation-7d7f39fb.js";import{Q as ae}from"../chunks/Qrcode-69d0c3c4.js";function Se(a){let e,s,t,o;const l=a[3].default,r=ue(l,a,a[2],null);return{c(){e=q("button"),r&&r.c(),this.h()},l(n){e=D(n,"BUTTON",{class:!0});var f=T(e);r&&r.l(f),f.forEach(u),this.h()},h(){e.disabled=a[0],C(e,"class","svelte-1grfu1j")},m(n,f){g(n,e,f),r&&r.m(e,null),s=!0,t||(o=re(e,"click",a[1]),t=!0)},p(n,[f]){r&&r.p&&(!s||f&4)&&_e(r,l,n,n[2],s?$e(l,n[2],f,null):pe(n[2]),null),(!s||f&1)&&(e.disabled=n[0])},i(n){s||(v(r,n),s=!0)},o(n){w(r,n),s=!1},d(n){n&&u(e),r&&r.d(n),t=!1,o()}}}function Ee(a,e,s){let{$$slots:t={},$$scope:o}=e,{disabled:l=!1}=e;const r=me();function n(){r("click")}return a.$$set=f=>{"disabled"in f&&s(0,l=f.disabled),"$$scope"in f&&s(2,o=f.$$scope)},[l,n,o,t]}class H extends se{constructor(e){super();le(this,e,Ee,Se,ne,{disabled:0})}}function x(a,e,s){const t=a.slice();return t[14]=e[s],t}function ye(a){let e,s,t,o;return e=new H({props:{$$slots:{default:[De]},$$scope:{ctx:a}}}),e.$on("click",a[7]),t=new H({props:{$$slots:{default:[Te]},$$scope:{ctx:a}}}),t.$on("click",a[9]),{c(){O(e.$$.fragment),s=I(),O(t.$$.fragment)},l(l){P(e.$$.fragment,l),s=N(l),P(t.$$.fragment,l)},m(l,r){A(e,l,r),g(l,s,r),A(t,l,r),o=!0},p(l,r){const n={};r&131072&&(n.$$scope={dirty:r,ctx:l}),e.$set(n);const f={};r&131072&&(f.$$scope={dirty:r,ctx:l}),t.$set(f)},i(l){o||(v(e.$$.fragment,l),v(t.$$.fragment,l),o=!0)},o(l){w(e.$$.fragment,l),w(t.$$.fragment,l),o=!1},d(l){B(e,l),l&&u(s),B(t,l)}}}function Re(a){let e,s,t,o,l,r;return e=new oe({props:{$$slots:{default:[Ce]},$$scope:{ctx:a}}}),{c(){O(e.$$.fragment),s=I(),t=q("textarea")},l(n){P(e.$$.fragment,n),s=N(n),t=D(n,"TEXTAREA",{}),T(t).forEach(u)},m(n,f){A(e,n,f),g(n,s,f),g(n,t,f),Y(t,a[2]),o=!0,l||(r=re(t,"input",a[11]),l=!0)},p(n,f){const b={};f&131072&&(b.$$scope={dirty:f,ctx:n}),e.$set(b),f&4&&Y(t,n[2])},i(n){o||(v(e.$$.fragment,n),o=!0)},o(n){w(e.$$.fragment,n),o=!1},d(n){B(e,n),n&&u(s),n&&u(t),l=!1,r()}}}function Qe(a){let e,s,t,o,l,r,n,f,b,i,p,E,_,h,k=new Array(a[4]).fill(1).map(a[10]),d=[];for(let c=0;c<k.length;c+=1)d[c]=ee(x(a,k,c));const L=c=>w(d[c],1,1,()=>{d[c]=null});return _=new H({props:{$$slots:{default:[Le]},$$scope:{ctx:a}}}),_.$on("click",a[8]),{c(){e=q("div"),s=q("div"),o=I(),l=q("div"),r=y(a[3]),n=y(" of "),f=y(a[4]),b=y(" QR codes scanned."),i=I(),p=q("ul");for(let c=0;c<d.length;c+=1)d[c].c();E=I(),O(_.$$.fragment),this.h()},l(c){e=D(c,"DIV",{class:!0});var $=T(e);s=D($,"DIV",{class:!0,style:!0}),T(s).forEach(u),$.forEach(u),o=N(c),l=D(c,"DIV",{class:!0});var S=T(l);r=R(S,a[3]),n=R(S," of "),f=R(S,a[4]),b=R(S," QR codes scanned."),S.forEach(u),i=N(c),p=D(c,"UL",{class:!0});var m=T(p);for(let V=0;V<d.length;V+=1)d[V].l(m);m.forEach(u),E=N(c),P(_.$$.fragment,c),this.h()},h(){C(s,"class","progress svelte-1ry2dsm"),C(s,"style",t=`width: ${100*a[3]/a[4]}%;`),C(e,"class","progressBar svelte-1ry2dsm"),C(l,"class","progressText svelte-1ry2dsm"),C(p,"class","qrcodes svelte-1ry2dsm")},m(c,$){g(c,e,$),Q(e,s),g(c,o,$),g(c,l,$),Q(l,r),Q(l,n),Q(l,f),Q(l,b),g(c,i,$),g(c,p,$);for(let S=0;S<d.length;S+=1)d[S].m(p,null);g(c,E,$),A(_,c,$),h=!0},p(c,$){if((!h||$&24&&t!==(t=`width: ${100*c[3]/c[4]}%;`))&&C(s,"style",t),(!h||$&8)&&M(r,c[3]),(!h||$&16)&&M(f,c[4]),$&48){k=new Array(c[4]).fill(1).map(c[10]);let m;for(m=0;m<k.length;m+=1){const V=x(c,k,m);d[m]?(d[m].p(V,$),v(d[m],1)):(d[m]=ee(V),d[m].c(),v(d[m],1),d[m].m(p,null))}for(G(),m=k.length;m<d.length;m+=1)L(m);F()}const S={};$&131072&&(S.$$scope={dirty:$,ctx:c}),_.$set(S)},i(c){if(!h){for(let $=0;$<k.length;$+=1)v(d[$]);v(_.$$.fragment,c),h=!0}},o(c){d=d.filter(Boolean);for(let $=0;$<d.length;$+=1)w(d[$]);w(_.$$.fragment,c),h=!1},d(c){c&&u(e),c&&u(o),c&&u(l),c&&u(i),c&&u(p),ke(d,c),c&&u(E),B(_,c)}}}function qe(a){let e,s,t,o,l;return e=new oe({props:{$$slots:{default:[Oe]},$$scope:{ctx:a}}}),{c(){O(e.$$.fragment),s=I(),t=q("p"),o=y(a[1])},l(r){P(e.$$.fragment,r),s=N(r),t=D(r,"P",{});var n=T(t);o=R(n,a[1]),n.forEach(u)},m(r,n){A(e,r,n),g(r,s,n),g(r,t,n),Q(t,o),l=!0},p(r,n){const f={};n&131072&&(f.$$scope={dirty:n,ctx:r}),e.$set(f),(!l||n&2)&&M(o,r[1])},i(r){l||(v(e.$$.fragment,r),l=!0)},o(r){w(e.$$.fragment,r),l=!1},d(r){B(e,r),r&&u(s),r&&u(t)}}}function De(a){let e;return{c(){e=y("Start scanning!")},l(s){e=R(s,"Start scanning!")},m(s,t){g(s,e,t)},d(s){s&&u(e)}}}function Te(a){let e;return{c(){e=y("Reset scanning")},l(s){e=R(s,"Reset scanning")},m(s,t){g(s,e,t)},d(s){s&&u(e)}}}function Ce(a){let e;return{c(){e=y("Successfully scanned all QR codes!")},l(s){e=R(s,"Successfully scanned all QR codes!")},m(s,t){g(s,e,t)},d(s){s&&u(e)}}}function Ie(a){let e,s;return e=new ae({props:{value:"..."}}),{c(){O(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,o){A(e,t,o),s=!0},p:ve,i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function Ne(a){let e,s;return e=new ae({props:{value:a[14].chunk}}),{c(){O(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,o){A(e,t,o),s=!0},p(t,o){const l={};o&48&&(l.value=t[14].chunk),e.$set(l)},i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function ee(a){let e,s,t,o,l,r=a[14].index+1+"",n,f,b;const i=[Ne,Ie],p=[];function E(_,h){return _[14].chunk?0:1}return s=E(a),t=p[s]=i[s](a),{c(){e=q("li"),t.c(),o=I(),l=q("div"),n=y(r),f=I(),this.h()},l(_){e=D(_,"LI",{class:!0});var h=T(e);t.l(h),o=N(h),l=D(h,"DIV",{});var k=T(l);n=R(k,r),k.forEach(u),f=N(h),h.forEach(u),this.h()},h(){C(e,"class","qrcode svelte-1ry2dsm"),Z(e,"scanned",!!a[14].chunk)},m(_,h){g(_,e,h),p[s].m(e,null),Q(e,o),Q(e,l),Q(l,n),Q(e,f),b=!0},p(_,h){let k=s;s=E(_),s===k?p[s].p(_,h):(G(),w(p[k],1,1,()=>{p[k]=null}),F(),t=p[s],t?t.p(_,h):(t=p[s]=i[s](_),t.c()),v(t,1),t.m(e,o)),(!b||h&48)&&r!==(r=_[14].index+1+"")&&M(n,r),h&48&&Z(e,"scanned",!!_[14].chunk)},i(_){b||(v(t),b=!0)},o(_){w(t),b=!1},d(_){_&&u(e),p[s].d()}}}function Le(a){let e;return{c(){e=y("Stop scanning!")},l(s){e=R(s,"Stop scanning!")},m(s,t){g(s,e,t)},d(s){s&&u(e)}}}function Oe(a){let e;return{c(){e=y("Error scanning!")},l(s){e=R(s,"Error scanning!")},m(s,t){g(s,e,t)},d(s){s&&u(e)}}}function Pe(a){let e,s,t,o,l,r;const n=[qe,Qe,Re,ye],f=[];function b(i,p){return i[0]==="ERROR"?0:i[0]==="SCANNING"?1:i[0]==="RESULT"?2:3}return t=b(a),o=f[t]=n[t](a),{c(){e=q("div"),s=I(),o.c(),l=z(),this.h()},l(i){e=D(i,"DIV",{id:!0}),T(e).forEach(u),s=N(i),o.l(i),l=z(),this.h()},h(){C(e,"id","reader")},m(i,p){g(i,e,p),g(i,s,p),f[t].m(i,p),g(i,l,p),r=!0},p(i,p){let E=t;t=b(i),t===E?f[t].p(i,p):(G(),w(f[E],1,1,()=>{f[E]=null}),F(),o=f[t],o?o.p(i,p):(o=f[t]=n[t](i),o.c()),v(o,1),o.m(l.parentNode,l))},i(i){r||(v(o),r=!0)},o(i){w(o),r=!1},d(i){i&&u(e),i&&u(s),f[t].d(i),i&&u(l)}}}function Ae(a){let e,s;return e=new we({props:{$$slots:{default:[Pe]},$$scope:{ctx:a}}}),{c(){O(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,o){A(e,t,o),s=!0},p(t,[o]){const l={};o&131135&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function te(a){return`${a}`.padStart(2,"0")}function Be(a,e,s){let t,o="STOPPED",l=null,r="",n=be({});de(a,n,L=>s(5,t=L));let f,b=0,i=1;he(()=>{f=new ge("reader")});async function p(L){const c=async(m,V)=>{const J=m.substring(0,8),ce=m.substring(9),fe=J.slice(-2),K=parseInt(fe,10)+1;if(i!==K&&(j(n,t={},t),s(4,i=K)),j(n,t[J]=ce,t),s(3,b=Object.keys(t).length),b===i){await _(),s(0,o="RESULT");const W=Object.entries(t);W.sort(([U],[X])=>U<X?-1:1),s(2,r=W.reduce((U,[X,ie])=>U+ie,""))}},$=m=>{console.error(m)},S={fps:500,qrbox:{width:250,height:250}};try{await f.start({facingMode:"environment"},S,c,$),s(0,o="SCANNING")}catch(m){console.error(m),s(1,l=m.message)}}async function E(){await _(),s(0,o="STOPPED")}async function _(){try{await f.stop()}catch(L){console.error(L),s(1,l=L.message)}}async function h(){j(n,t={},t)}const k=(L,c)=>({index:c,chunk:t[`MQR${te(c)}.${te(i-1)}`]});function d(){r=this.value,s(2,r)}return[o,l,r,b,i,t,n,p,E,h,k,d]}class Ge extends se{constructor(e){super();le(this,e,Be,Ae,ne,{})}}export{Ge as default};
