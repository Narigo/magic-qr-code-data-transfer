import{S as se,i as le,s as re,F as _e,e as C,c as N,a as T,d as $,b as I,g as h,M as oe,G as $e,H as pe,I as me,q as b,o as v,Q as de,w as q,x as D,y,B as L,R as ge,v as he,T as be,k as M,l as z,m as O,n as U,p as j,D as ke,U as G,L as Y,t as w,h as S,J as Q,j as V,V as Z,N as ve,K as we}from"../chunks/vendor-b62c2773.js";import{H as ae}from"../chunks/Headline-4376ad16.js";import{P as Se}from"../chunks/PageWithNavigation-7d7f39fb.js";import{Q as ce}from"../chunks/Qrcode-69d0c3c4.js";function Ee(o){let e,n,t,l;const s=o[3].default,r=_e(s,o,o[2],null);return{c(){e=C("button"),r&&r.c(),this.h()},l(a){e=N(a,"BUTTON",{class:!0});var u=T(e);r&&r.l(u),u.forEach($),this.h()},h(){e.disabled=o[0],I(e,"class","svelte-1grfu1j")},m(a,u){h(a,e,u),r&&r.m(e,null),n=!0,t||(l=oe(e,"click",o[1]),t=!0)},p(a,[u]){r&&r.p&&(!n||u&4)&&$e(r,s,a,a[2],n?me(s,a[2],u,null):pe(a[2]),null),(!n||u&1)&&(e.disabled=a[0])},i(a){n||(b(r,a),n=!0)},o(a){v(r,a),n=!1},d(a){a&&$(e),r&&r.d(a),t=!1,l()}}}function Re(o,e,n){let{$$slots:t={},$$scope:l}=e,{disabled:s=!1}=e;const r=de();function a(){r("click")}return o.$$set=u=>{"disabled"in u&&n(0,s=u.disabled),"$$scope"in u&&n(2,l=u.$$scope)},[s,a,l,t]}class B extends se{constructor(e){super();le(this,e,Re,Ee,re,{disabled:0})}}function x(o,e,n){const t=o.slice();return t[15]=e[n],t}function Ie(o){let e,n;return e=new B({props:{$$slots:{default:[qe]},$$scope:{ctx:o}}}),e.$on("click",o[8]),{c(){q(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,l){y(e,t,l),n=!0},p(t,l){const s={};l&262144&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Qe(o){let e,n,t,l;return e=new B({props:{$$slots:{default:[De]},$$scope:{ctx:o}}}),e.$on("click",o[8]),t=new B({props:{$$slots:{default:[ye]},$$scope:{ctx:o}}}),t.$on("click",o[10]),{c(){q(e.$$.fragment),n=M(),q(t.$$.fragment)},l(s){D(e.$$.fragment,s),n=O(s),D(t.$$.fragment,s)},m(s,r){y(e,s,r),h(s,n,r),y(t,s,r),l=!0},p(s,r){const a={};r&262144&&(a.$$scope={dirty:r,ctx:s}),e.$set(a);const u={};r&262144&&(u.$$scope={dirty:r,ctx:s}),t.$set(u)},i(s){l||(b(e.$$.fragment,s),b(t.$$.fragment,s),l=!0)},o(s){v(e.$$.fragment,s),v(t.$$.fragment,s),l=!1},d(s){L(e,s),s&&$(n),L(t,s)}}}function Ce(o){let e,n,t,l,s,r,a,u;return e=new ae({props:{$$slots:{default:[Le]},$$scope:{ctx:o}}}),s=new B({props:{$$slots:{default:[Me]},$$scope:{ctx:o}}}),s.$on("click",o[10]),{c(){q(e.$$.fragment),n=M(),t=C("textarea"),l=M(),q(s.$$.fragment)},l(f){D(e.$$.fragment,f),n=O(f),t=N(f,"TEXTAREA",{}),T(t).forEach($),l=O(f),D(s.$$.fragment,f)},m(f,c){y(e,f,c),h(f,n,c),h(f,t,c),Y(t,o[2]),h(f,l,c),y(s,f,c),r=!0,a||(u=oe(t,"input",o[12]),a=!0)},p(f,c){const m={};c&262144&&(m.$$scope={dirty:c,ctx:f}),e.$set(m),c&4&&Y(t,f[2]);const k={};c&262144&&(k.$$scope={dirty:c,ctx:f}),s.$set(k)},i(f){r||(b(e.$$.fragment,f),b(s.$$.fragment,f),r=!0)},o(f){v(e.$$.fragment,f),v(s.$$.fragment,f),r=!1},d(f){L(e,f),f&&$(n),f&&$(t),f&&$(l),L(s,f),a=!1,u()}}}function Ne(o){let e,n,t,l=o[4]>0&&ee(o);return n=new B({props:{$$slots:{default:[Ae]},$$scope:{ctx:o}}}),n.$on("click",o[9]),{c(){l&&l.c(),e=M(),q(n.$$.fragment)},l(s){l&&l.l(s),e=O(s),D(n.$$.fragment,s)},m(s,r){l&&l.m(s,r),h(s,e,r),y(n,s,r),t=!0},p(s,r){s[4]>0?l?(l.p(s,r),r&16&&b(l,1)):(l=ee(s),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(U(),v(l,1,1,()=>{l=null}),j());const a={};r&262144&&(a.$$scope={dirty:r,ctx:s}),n.$set(a)},i(s){t||(b(l),b(n.$$.fragment,s),t=!0)},o(s){v(l),v(n.$$.fragment,s),t=!1},d(s){l&&l.d(s),s&&$(e),L(n,s)}}}function Te(o){let e,n,t,l,s;return e=new ae({props:{$$slots:{default:[Be]},$$scope:{ctx:o}}}),{c(){q(e.$$.fragment),n=M(),t=C("p"),l=w(o[1])},l(r){D(e.$$.fragment,r),n=O(r),t=N(r,"P",{});var a=T(t);l=S(a,o[1]),a.forEach($)},m(r,a){y(e,r,a),h(r,n,a),h(r,t,a),Q(t,l),s=!0},p(r,a){const u={};a&262144&&(u.$$scope={dirty:a,ctx:r}),e.$set(u),(!s||a&2)&&V(l,r[1])},i(r){s||(b(e.$$.fragment,r),s=!0)},o(r){v(e.$$.fragment,r),s=!1},d(r){L(e,r),r&&$(n),r&&$(t)}}}function qe(o){let e;return{c(){e=w("Start scanning!")},l(n){e=S(n,"Start scanning!")},m(n,t){h(n,e,t)},d(n){n&&$(e)}}}function De(o){let e;return{c(){e=w("Continue scanning")},l(n){e=S(n,"Continue scanning")},m(n,t){h(n,e,t)},d(n){n&&$(e)}}}function ye(o){let e;return{c(){e=w("Reset scanning")},l(n){e=S(n,"Reset scanning")},m(n,t){h(n,e,t)},d(n){n&&$(e)}}}function Le(o){let e;return{c(){e=w("Successfully scanned all QR codes!")},l(n){e=S(n,"Successfully scanned all QR codes!")},m(n,t){h(n,e,t)},d(n){n&&$(e)}}}function Me(o){let e;return{c(){e=w("Reset scanning")},l(n){e=S(n,"Reset scanning")},m(n,t){h(n,e,t)},d(n){n&&$(e)}}}function ee(o){let e,n,t,l,s,r,a,u,f,c,m,k,d=new Array(o[4]).fill(1).map(o[11]),_=[];for(let i=0;i<d.length;i+=1)_[i]=te(x(o,d,i));const E=i=>v(_[i],1,1,()=>{_[i]=null});return{c(){e=C("div"),n=C("div"),l=M(),s=C("div"),r=w(o[3]),a=w(" of "),u=w(o[4]),f=w(" QR codes scanned."),c=M(),m=C("ul");for(let i=0;i<_.length;i+=1)_[i].c();this.h()},l(i){e=N(i,"DIV",{class:!0});var g=T(e);n=N(g,"DIV",{class:!0,style:!0}),T(n).forEach($),g.forEach($),l=O(i),s=N(i,"DIV",{class:!0});var p=T(s);r=S(p,o[3]),a=S(p," of "),u=S(p,o[4]),f=S(p," QR codes scanned."),p.forEach($),c=O(i),m=N(i,"UL",{class:!0});var R=T(m);for(let A=0;A<_.length;A+=1)_[A].l(R);R.forEach($),this.h()},h(){I(n,"class","progress svelte-uxd3o6"),I(n,"style",t=`width: ${100*o[3]/o[4]}%;`),I(e,"class","progressBar svelte-uxd3o6"),I(s,"class","progressText svelte-uxd3o6"),I(m,"class","qrcodes svelte-uxd3o6")},m(i,g){h(i,e,g),Q(e,n),h(i,l,g),h(i,s,g),Q(s,r),Q(s,a),Q(s,u),Q(s,f),h(i,c,g),h(i,m,g);for(let p=0;p<_.length;p+=1)_[p].m(m,null);k=!0},p(i,g){if((!k||g&24&&t!==(t=`width: ${100*i[3]/i[4]}%;`))&&I(n,"style",t),(!k||g&8)&&V(r,i[3]),(!k||g&16)&&V(u,i[4]),g&48){d=new Array(i[4]).fill(1).map(i[11]);let p;for(p=0;p<d.length;p+=1){const R=x(i,d,p);_[p]?(_[p].p(R,g),b(_[p],1)):(_[p]=te(R),_[p].c(),b(_[p],1),_[p].m(m,null))}for(U(),p=d.length;p<_.length;p+=1)E(p);j()}},i(i){if(!k){for(let g=0;g<d.length;g+=1)b(_[g]);k=!0}},o(i){_=_.filter(Boolean);for(let g=0;g<_.length;g+=1)v(_[g]);k=!1},d(i){i&&$(e),i&&$(l),i&&$(s),i&&$(c),i&&$(m),ve(_,i)}}}function Oe(o){let e,n;return e=new ce({props:{value:"..."}}),{c(){q(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,l){y(e,t,l),n=!0},p:we,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Pe(o){let e,n;return e=new ce({props:{value:o[15].chunk}}),{c(){q(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,l){y(e,t,l),n=!0},p(t,l){const s={};l&48&&(s.value=t[15].chunk),e.$set(s)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function te(o){let e,n,t,l,s,r=o[15].index+1+"",a,u,f;const c=[Pe,Oe],m=[];function k(d,_){return d[15].chunk?0:1}return n=k(o),t=m[n]=c[n](o),{c(){e=C("li"),t.c(),l=M(),s=C("div"),a=w(r),u=M(),this.h()},l(d){e=N(d,"LI",{class:!0});var _=T(e);t.l(_),l=O(_),s=N(_,"DIV",{});var E=T(s);a=S(E,r),E.forEach($),u=O(_),_.forEach($),this.h()},h(){I(e,"class","qrcode svelte-uxd3o6"),Z(e,"scanned",!!o[15].chunk)},m(d,_){h(d,e,_),m[n].m(e,null),Q(e,l),Q(e,s),Q(s,a),Q(e,u),f=!0},p(d,_){let E=n;n=k(d),n===E?m[n].p(d,_):(U(),v(m[E],1,1,()=>{m[E]=null}),j(),t=m[n],t?t.p(d,_):(t=m[n]=c[n](d),t.c()),b(t,1),t.m(e,l)),(!f||_&48)&&r!==(r=d[15].index+1+"")&&V(a,r),_&48&&Z(e,"scanned",!!d[15].chunk)},i(d){f||(b(t),f=!0)},o(d){v(t),f=!1},d(d){d&&$(e),m[n].d()}}}function Ae(o){let e;return{c(){e=w("Stop scanning!")},l(n){e=S(n,"Stop scanning!")},m(n,t){h(n,e,t)},d(n){n&&$(e)}}}function Be(o){let e;return{c(){e=w("Error scanning!")},l(n){e=S(n,"Error scanning!")},m(n,t){h(n,e,t)},d(n){n&&$(e)}}}function Ve(o){let e,n,t,l,s,r;const a=[Te,Ne,Ce,Qe,Ie],u=[];function f(c,m){return c[0]==="ERROR"?0:c[0]==="SCANNING"?1:c[0]==="RESULT"?2:c[0]==="STOPPED"?3:4}return t=f(o),l=u[t]=a[t](o),{c(){e=C("div"),n=M(),l.c(),s=z(),this.h()},l(c){e=N(c,"DIV",{id:!0,class:!0}),T(e).forEach($),n=O(c),l.l(c),s=z(),this.h()},h(){I(e,"id",o[7]),I(e,"class","reader svelte-uxd3o6")},m(c,m){h(c,e,m),h(c,n,m),u[t].m(c,m),h(c,s,m),r=!0},p(c,m){let k=t;t=f(c),t===k?u[t].p(c,m):(U(),v(u[k],1,1,()=>{u[k]=null}),j(),l=u[t],l?l.p(c,m):(l=u[t]=a[t](c),l.c()),b(l,1),l.m(s.parentNode,s))},i(c){r||(b(l),r=!0)},o(c){v(l),r=!1},d(c){c&&$(e),c&&$(n),u[t].d(c),c&&$(s)}}}function Ue(o){let e,n;return e=new Se({props:{$$slots:{default:[Ve]},$$scope:{ctx:o}}}),{c(){q(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,l){y(e,t,l),n=!0},p(t,[l]){const s={};l&262207&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}let je=0;function He(o){return`${o}${++je}`}function ne(o){return`${o}`.padStart(2,"0")}function Ge(o,e,n){let t,l="INIT",s=null,r="",a=ke({});ge(o,a,p=>n(5,t=p));let u,f=0,c=0;const m=He("reader_");he(()=>{u=new be(m)});async function k(){const p=async(P,F)=>{const J=P.substring(0,8),fe=P.substring(9),ue=J.slice(-2),K=parseInt(ue,10)+1;if(c!==K&&(G(a,t={},t),n(4,c=K)),G(a,t[J]=fe,t),n(3,f=Object.keys(t).length),f===c){await _(),n(0,l="RESULT");const W=Object.entries(t);W.sort(([H],[X])=>H<X?-1:1),n(2,r=W.reduce((H,[X,ie])=>H+ie,""))}},R=()=>{},A={fps:250,qrbox:(P,F)=>({width:Math.min(P,250),height:Math.min(F,250)})};try{await u.start({facingMode:"environment"},A,p,R),n(0,l="SCANNING")}catch(P){console.error(P),n(1,s=P.message)}}async function d(){await _(),n(0,l="STOPPED")}async function _(){try{await u.stop()}catch(p){console.error(p),n(1,s=p.message)}}async function E(){await _(),G(a,t={},t),n(2,r=""),n(3,f=0),n(4,c=0),await k()}const i=(p,R)=>({index:R,chunk:t[`MQR${ne(R)}.${ne(c-1)}`]});function g(){r=this.value,n(2,r)}return[l,s,r,f,c,t,a,m,k,d,E,i,g]}class ze extends se{constructor(e){super();le(this,e,Ge,Ue,re,{})}}export{ze as default};
